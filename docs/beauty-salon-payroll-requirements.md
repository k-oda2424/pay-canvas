# 美容室向けSaaS型給与計算システム 要件定義書

## 1. 概要
本システムは、複数の美容室運営会社（テナント）が、それぞれ独立した環境で独自の給与体系を管理・運用するための、マルチテナントSaaS型Webアプリケーションである。日々の勤怠・売上実績から、複雑な手当や歩合を含む給与を自動計算し、月次の給与管理業務を効率化することを目的とする。

---

## 2. システムの目的とゴール
- **業務効率化**: 複雑で時間のかかる給与計算プロセスを自動化し、管理者の負担を大幅に削減する。
- **柔軟性と拡張性**: 企業ごとに異なる給与ルールや手当に柔軟に対応できる設定機能を提供し、将来の多店舗展開や制度変更にも対応可能なスケーラブルな基盤を構築する。
- **透明性と公平性**: 従業員が自身の給与計算根拠を明確に確認できる環境を提供し、公平で透明性の高いインセンティブ制度の運用を支援する。
- **データ駆動経営**: 蓄積された人件費や売上データを可視化し、経営判断に役立つインサイトを提供する。

---

## 3. システム利用ユーザー
本システムは、以下の3つのユーザー権限（ロール）を持つ。

1.  **スーパー管理者**:
    - システム全体の最高権限者。
    - 新規テナント（会社）の登録、契約状況の管理を行う。
    - テナントごとに、利用可能なシステム機能（例: 賞与管理機能）の有効/無効を設定する。

2.  **会社管理者**:
    - 各テナント（会社）の給与・労務管理者。
    - 自社の従業員、店舗、等級、給与体系などのマスタ情報を管理する。
    - 日々の勤怠や売上実績を確認・修正する。
    - 月次の給与計算を実行し、結果を確認・確定する。
    - 全従業員の給与明細を閲覧し、会計ソフト連携用のデータを出力する。

3.  **一般スタッフ**:
    - 各テナントに所属する一般従業員。
    - 自身の給与明細や勤務実績を閲覧する。他人の情報は一切閲覧できない。

---

## 4. 機能要件

### 4.1. スーパー管理者向け機能
- **テナント管理機能**:
    - 新規テナント（会社）の登録、編集、契約停止（サスペンド）ができる。
- **機能フラグ管理機能**:
    - システムに存在する機能（例: 賞与管理、出張手当計算など）を一覧で確認できる。
    - テナントごとに、各機能の利用可否（有効/無効）を設定できる。

### 4.2. 会社管理者向け機能
- **ダッシュボード機能**:
    - ログイン後、自社の主要KPI（総人件費、売上など）や対応が必要なタスク（勤怠未入力アラートなど）を一覧表示する。
- **マスタ管理機能**:
    - 従業員、店舗、等級、給与テーブル（休日数に応じた基本給設定）など、給与計算の基礎となる情報を登録・編集・削除できる。
- **日次実績管理機能**:
    - 外部システム（KING OF TIME, POS）から連携された日々の勤怠・売上データをカレンダー等で確認できる。
    - データの修正や、経費などの手動登録ができる。
- **給与計算実行機能**:
    - 対象年月を指定し、月次給与計算を実行できる。
    - 計算前にデータの不備をチェックする機能を持つ。
    - 計算結果を全従業員分一覧で確認し、問題なければ計算を確定できる。
- **給与明細・レポート機能**:
    - 確定した月の給与明細を、全従業員分閲覧できる。
    - 会計ソフト「弥生給与」に取り込むためのCSVデータを出力できる。

### 4.3. 一般スタッフ向け機能
- **給与明細閲覧機能**:
    - 自身の過去分を含む給与明細を、いつでも閲覧できる。
    - 各種手当や控除の詳細な内訳を確認できる。

---

## 5. 非機能要件
- **マルチテナンシー**:
    - 共有データベース・共有スキーマ方式を採用する。
    - アプリケーションレベルでテナント間のデータを完全に分離し、他のテナントのデータにアクセスできないことを保証する。
- **セキュリティ**:
    - パスワードはハッシュ化して保存する。
    - 通信はすべてSSL/TLSで暗号化する。
    - 権限に応じて、アクセスできる機能やデータを厳密に制御する。
- **可用性**:
    - システムは24時間365日稼働することを原則とする。
- **拡張性**:
    - 将来的なテナント数、従業員数の増加に対応可能な設計とする。

---

## 6. システム構成
- **フロントエンド**: SPA (Single Page Application)
- **バックエンド**: Java (Spring Boot)
- **データベース**: PostgreSQL

---

## 7. 外部システム連携
- **勤怠管理システム (KING OF TIME)**:
    - API連携による勤怠データの自動取得を基本とする。
    - API連携ができない場合を想定し、CSVファイルによる手動インポート機能も実装する。
- **会計ソフト (弥生給与)**:
    - 計算・確定した給与データを、弥生給与が取り込み可能なフォーマットのCSVファイルで出力する。
